# SMS_bot

# Приложение, которое собирает информацию о продажах за определнный период и направляет смс покупателям пройти опрос в телеграме о качестве покупки

## Описание

### Посредством requests запроса направляется запрос к эндпойнту API приложения "Мой скад", содержащего информацию о клиентах и продажах. Периодичность запроса и рассылки можно определить через специальную константу - список, содержащий порядковые номера дней недели.

### Приложение проверяет ответ от эндпойнта, формат ответа (json), содеражние необходий информации.

### В случае если ответ не соответствует требованиям направляется соответствующее сообщение в телеграм.

### В случае если ответ валидный формируется список рассылки смс

### Рассылка осуществляется с помощью API мобильного оператора, по результатам рассылки формируется интегральный отчет (количество клиентов за период, успешно отправленных смс, стоимость отправки и текущий баланс счета), а также файл, содержащий информацию о каждом клиенте. Указанные отчеты направляются в телеграм владельцу магазина.

### Реализовано логирование ошибок приложения.

### С помощью пакета dotenv ключи к эндпойнту и телеграм-чату расположены в вируальном окружении и недоступны в коде программы.

## Как установить проект

### Клонировать репозиторий и перейти в него в командной строке:

```
git clone https://github.com/AKafer/my_store_sales.git
cd my_store_sales
```

### Создать и активировать виртуальное окружение:

```
python -m venv venv
source venv/Scripts/activate
```

### Установить зависимости из файла requirements.txt:

```
pip install -r requirements.txt
```

### Перейти в папку /my_store/ и создать файл .env со следующим содержимым:

```
TOKEN_ADMIN ****** # токен для API сайта "Мой склад"
TELEGRAM_TOKEN_1 ****** # токен телеграм 1-го бота
TELEGRAM_TOKEN_2 ****** # токен телеграм 2-го бота
...
TELEGRAM_CHAT_ID_1 ****** # чат ID владельца
TELEGRAM_CHAT_ID_2 ****** # чат ID владельца
...
ENDPOINT https://online.moysklad.ru/api/***** # эндпойнт приложения "Мой склад"
DEVINO_LOGIN ****** # логин в лк мобильного оператора
DEVINO_PASSWORD ****** # пароль в лк мобильного оператора
DEVINO_SOURCE_ADDRESS ****** # имя отправителя в sms
SMS_TEXT ****** # текст смс
```

### Запустить проект:

```
python sms_bot.py
```

### Проект развернут в Docker контейнере на Яндекс.Облако

## Стек технологий

### Python 3, requests, dotenv, telegram, logging, Docker

## Автор проекта - Сергей Сторожук
